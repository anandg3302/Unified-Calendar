{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":41,"index":41}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":104},"end":{"line":3,"column":62,"index":166}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":167},"end":{"line":4,"column":69,"index":236}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"C:\\\\Users\\\\geeth\\\\Unified-Calendar\\\\frontend\\\\app\\\\oauth-callback.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return OAuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[2], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[3], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _expoRouter = require(_dependencyMap[4], \"expo-router\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[5], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactJsxDevRuntime = require(_dependencyMap[6], \"react/jsx-dev-runtime\");\n  function OAuthCallback() {\n    _s();\n    const router = (0, _expoRouter.useRouter)();\n    const params = (0, _expoRouter.useLocalSearchParams)();\n    (0, _react.useEffect)(() => {\n      const run = async () => {\n        try {\n          const token = typeof params.token === 'string' ? params.token : Array.isArray(params.token) ? params.token[0] : undefined;\n          let userStr = typeof params.user === 'string' ? params.user : Array.isArray(params.user) ? params.user[0] : undefined;\n          console.log('‚úÖ OAuth callback hit');\n          console.log('üîé Raw params:', params);\n          if (!token || !userStr) {\n            console.warn('‚ùå Missing token or user in query params');\n            // Navigate home even if missing to avoid dead end\n            router.replace('/');\n            return;\n          }\n\n          // Decode and parse user JSON\n          try {\n            userStr = decodeURIComponent(userStr);\n          } catch {}\n          let user = undefined;\n          try {\n            user = JSON.parse(userStr);\n          } catch (e) {\n            console.warn('‚ö†Ô∏è Failed to parse user JSON, using raw string');\n            user = userStr;\n          }\n\n          // Persist in web localStorage\n          try {\n            window.localStorage.setItem('token', token);\n            window.localStorage.setItem('user', JSON.stringify(user));\n            console.log('‚úÖ Saved token + user to localStorage');\n          } catch {}\n\n          // Persist in native storage (no-op on web)\n          try {\n            await AsyncStorage.default.setItem('auth_token', token);\n            await AsyncStorage.default.setItem('user', JSON.stringify(user));\n            console.log('‚úÖ Saved token + user to AsyncStorage');\n          } catch {}\n\n          // Navigate to home/dashboard\n          router.replace('/');\n        } catch (e) {\n          console.error('‚ùå OAuth callback error:', e);\n          router.replace('/');\n        }\n      };\n      run();\n    }, [params, router]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: {\n        flex: 1,\n        alignItems: 'center',\n        justifyContent: 'center'\n      },\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: {\n          marginTop: 12\n        },\n        children: \"Completing sign-in\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this);\n  }\n  _s(OAuthCallback, \"Xgd2mmLTJ9rtfx6NSqeuKy+rqns=\", false, function () {\n    return [_expoRouter.useRouter, _expoRouter.useLocalSearchParams];\n  });\n  _c = OAuthCallback;\n  var _c;\n  $RefreshReg$(_c, \"OAuthCallback\");\n});","lineCount":118,"map":[[14,2,6,15,"Object"],[14,8,6,15],[14,9,6,15,"defineProperty"],[14,23,6,15],[14,24,6,15,"exports"],[14,31,6,15],[15,4,6,15,"enumerable"],[15,14,6,15],[16,4,6,15,"get"],[16,7,6,15],[16,18,6,15,"get"],[16,19,6,15],[17,6,6,15],[17,13,6,15,"OAuthCallback"],[17,26,6,15],[18,4,6,15],[19,2,6,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,41],[21,6,1,41,"_reactNativeWebDistExportsView"],[21,36,1,41],[21,39,1,41,"require"],[21,46,1,41],[21,47,1,41,"_dependencyMap"],[21,61,1,41],[22,2,1,41],[22,6,1,41,"View"],[22,10,1,41],[22,13,1,41,"_interopDefault"],[22,28,1,41],[22,29,1,41,"_reactNativeWebDistExportsView"],[22,59,1,41],[23,2,1,41],[23,6,1,41,"_reactNativeWebDistExportsActivityIndicator"],[23,49,1,41],[23,52,1,41,"require"],[23,59,1,41],[23,60,1,41,"_dependencyMap"],[23,74,1,41],[24,2,1,41],[24,6,1,41,"ActivityIndicator"],[24,23,1,41],[24,26,1,41,"_interopDefault"],[24,41,1,41],[24,42,1,41,"_reactNativeWebDistExportsActivityIndicator"],[24,85,1,41],[25,2,1,41],[25,6,1,41,"_reactNativeWebDistExportsText"],[25,36,1,41],[25,39,1,41,"require"],[25,46,1,41],[25,47,1,41,"_dependencyMap"],[25,61,1,41],[26,2,1,41],[26,6,1,41,"Text"],[26,10,1,41],[26,13,1,41,"_interopDefault"],[26,28,1,41],[26,29,1,41,"_reactNativeWebDistExportsText"],[26,59,1,41],[27,2,3,0],[27,6,3,0,"_expoRouter"],[27,17,3,0],[27,20,3,0,"require"],[27,27,3,0],[27,28,3,0,"_dependencyMap"],[27,42,3,0],[28,2,4,0],[28,6,4,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,4,0],[28,45,4,0,"require"],[28,52,4,0],[28,53,4,0,"_dependencyMap"],[28,67,4,0],[29,2,4,0],[29,6,4,0,"AsyncStorage"],[29,18,4,0],[29,21,4,0,"_interopDefault"],[29,36,4,0],[29,37,4,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,4,0],[30,2,4,69],[30,6,4,69,"_reactJsxDevRuntime"],[30,25,4,69],[30,28,4,69,"require"],[30,35,4,69],[30,36,4,69,"_dependencyMap"],[30,50,4,69],[31,2,6,15],[31,11,6,24,"OAuthCallback"],[31,24,6,37,"OAuthCallback"],[31,25,6,37],[31,27,6,40],[32,4,6,40,"_s"],[32,6,6,40],[33,4,7,2],[33,10,7,8,"router"],[33,16,7,14],[33,19,7,17],[33,23,7,17,"useRouter"],[33,34,7,26],[33,35,7,26,"useRouter"],[33,44,7,26],[33,46,7,27],[33,47,7,28],[34,4,8,2],[34,10,8,8,"params"],[34,16,8,14],[34,19,8,17],[34,23,8,17,"useLocalSearchParams"],[34,34,8,37],[34,35,8,37,"useLocalSearchParams"],[34,55,8,37],[34,57,8,38],[34,58,8,39],[35,4,10,2],[35,8,10,2,"useEffect"],[35,14,10,11],[35,15,10,11,"useEffect"],[35,24,10,11],[35,26,10,12],[35,32,10,18],[36,6,11,4],[36,12,11,10,"run"],[36,15,11,13],[36,18,11,16],[36,24,11,16,"run"],[36,25,11,16],[36,30,11,28],[37,8,12,6],[37,12,12,10],[38,10,13,8],[38,16,13,14,"token"],[38,21,13,19],[38,24,13,22],[38,31,13,29,"params"],[38,37,13,35],[38,38,13,36,"token"],[38,43,13,41],[38,48,13,46],[38,56,13,54],[38,59,13,57,"params"],[38,65,13,63],[38,66,13,64,"token"],[38,71,13,69],[38,74,13,72,"Array"],[38,79,13,77],[38,80,13,78,"isArray"],[38,87,13,85],[38,88,13,86,"params"],[38,94,13,92],[38,95,13,93,"token"],[38,100,13,98],[38,101,13,99],[38,104,13,102,"params"],[38,110,13,108],[38,111,13,109,"token"],[38,116,13,114],[38,117,13,115],[38,118,13,116],[38,119,13,117],[38,122,13,120,"undefined"],[38,131,13,129],[39,10,14,8],[39,14,14,12,"userStr"],[39,21,14,19],[39,24,14,22],[39,31,14,29,"params"],[39,37,14,35],[39,38,14,36,"user"],[39,42,14,40],[39,47,14,45],[39,55,14,53],[39,58,14,56,"params"],[39,64,14,62],[39,65,14,63,"user"],[39,69,14,67],[39,72,14,70,"Array"],[39,77,14,75],[39,78,14,76,"isArray"],[39,85,14,83],[39,86,14,84,"params"],[39,92,14,90],[39,93,14,91,"user"],[39,97,14,95],[39,98,14,96],[39,101,14,99,"params"],[39,107,14,105],[39,108,14,106,"user"],[39,112,14,110],[39,113,14,111],[39,114,14,112],[39,115,14,113],[39,118,14,116,"undefined"],[39,127,14,125],[40,10,16,8,"console"],[40,17,16,15],[40,18,16,16,"log"],[40,21,16,19],[40,22,16,20],[40,44,16,42],[40,45,16,43],[41,10,17,8,"console"],[41,17,17,15],[41,18,17,16,"log"],[41,21,17,19],[41,22,17,20],[41,38,17,36],[41,40,17,38,"params"],[41,46,17,44],[41,47,17,45],[42,10,19,8],[42,14,19,12],[42,15,19,13,"token"],[42,20,19,18],[42,24,19,22],[42,25,19,23,"userStr"],[42,32,19,30],[42,34,19,32],[43,12,20,10,"console"],[43,19,20,17],[43,20,20,18,"warn"],[43,24,20,22],[43,25,20,23],[43,66,20,64],[43,67,20,65],[44,12,21,10],[45,12,22,10,"router"],[45,18,22,16],[45,19,22,17,"replace"],[45,26,22,24],[45,27,22,25],[45,30,22,28],[45,31,22,29],[46,12,23,10],[47,10,24,8],[49,10,26,8],[50,10,27,8],[50,14,27,12],[51,12,28,10,"userStr"],[51,19,28,17],[51,22,28,20,"decodeURIComponent"],[51,40,28,38],[51,41,28,39,"userStr"],[51,48,28,46],[51,49,28,47],[52,10,29,8],[52,11,29,9],[52,12,29,10],[52,18,29,16],[52,19,29,17],[53,10,30,8],[53,14,30,12,"user"],[53,18,30,21],[53,21,30,24,"undefined"],[53,30,30,33],[54,10,31,8],[54,14,31,12],[55,12,32,10,"user"],[55,16,32,14],[55,19,32,17,"JSON"],[55,23,32,21],[55,24,32,22,"parse"],[55,29,32,27],[55,30,32,28,"userStr"],[55,37,32,35],[55,38,32,36],[56,10,33,8],[56,11,33,9],[56,12,33,10],[56,19,33,17,"e"],[56,20,33,18],[56,22,33,20],[57,12,34,10,"console"],[57,19,34,17],[57,20,34,18,"warn"],[57,24,34,22],[57,25,34,23],[57,73,34,71],[57,74,34,72],[58,12,35,10,"user"],[58,16,35,14],[58,19,35,17,"userStr"],[58,26,35,24],[59,10,36,8],[61,10,38,8],[62,10,39,8],[62,14,39,12],[63,12,40,10,"window"],[63,18,40,16],[63,19,40,17,"localStorage"],[63,31,40,29],[63,32,40,30,"setItem"],[63,39,40,37],[63,40,40,38],[63,47,40,45],[63,49,40,47,"token"],[63,54,40,52],[63,55,40,53],[64,12,41,10,"window"],[64,18,41,16],[64,19,41,17,"localStorage"],[64,31,41,29],[64,32,41,30,"setItem"],[64,39,41,37],[64,40,41,38],[64,46,41,44],[64,48,41,46,"JSON"],[64,52,41,50],[64,53,41,51,"stringify"],[64,62,41,60],[64,63,41,61,"user"],[64,67,41,65],[64,68,41,66],[64,69,41,67],[65,12,42,10,"console"],[65,19,42,17],[65,20,42,18,"log"],[65,23,42,21],[65,24,42,22],[65,62,42,60],[65,63,42,61],[66,10,43,8],[66,11,43,9],[66,12,43,10],[66,18,43,16],[66,19,43,17],[68,10,45,8],[69,10,46,8],[69,14,46,12],[70,12,47,10],[70,18,47,16,"AsyncStorage"],[70,30,47,28],[70,31,47,28,"default"],[70,38,47,28],[70,39,47,29,"setItem"],[70,46,47,36],[70,47,47,37],[70,59,47,49],[70,61,47,51,"token"],[70,66,47,56],[70,67,47,57],[71,12,48,10],[71,18,48,16,"AsyncStorage"],[71,30,48,28],[71,31,48,28,"default"],[71,38,48,28],[71,39,48,29,"setItem"],[71,46,48,36],[71,47,48,37],[71,53,48,43],[71,55,48,45,"JSON"],[71,59,48,49],[71,60,48,50,"stringify"],[71,69,48,59],[71,70,48,60,"user"],[71,74,48,64],[71,75,48,65],[71,76,48,66],[72,12,49,10,"console"],[72,19,49,17],[72,20,49,18,"log"],[72,23,49,21],[72,24,49,22],[72,62,49,60],[72,63,49,61],[73,10,50,8],[73,11,50,9],[73,12,50,10],[73,18,50,16],[73,19,50,17],[75,10,52,8],[76,10,53,8,"router"],[76,16,53,14],[76,17,53,15,"replace"],[76,24,53,22],[76,25,53,23],[76,28,53,26],[76,29,53,27],[77,8,54,6],[77,9,54,7],[77,10,54,8],[77,17,54,15,"e"],[77,18,54,16],[77,20,54,18],[78,10,55,8,"console"],[78,17,55,15],[78,18,55,16,"error"],[78,23,55,21],[78,24,55,22],[78,49,55,47],[78,51,55,49,"e"],[78,52,55,50],[78,53,55,51],[79,10,56,8,"router"],[79,16,56,14],[79,17,56,15,"replace"],[79,24,56,22],[79,25,56,23],[79,28,56,26],[79,29,56,27],[80,8,57,6],[81,6,58,4],[81,7,58,5],[82,6,59,4,"run"],[82,9,59,7],[82,10,59,8],[82,11,59,9],[83,4,60,2],[83,5,60,3],[83,7,60,5],[83,8,60,6,"params"],[83,14,60,12],[83,16,60,14,"router"],[83,22,60,20],[83,23,60,21],[83,24,60,22],[84,4,62,2],[84,24,63,4],[84,28,63,4,"_reactJsxDevRuntime"],[84,47,63,4],[84,48,63,4,"jsxDEV"],[84,54,63,4],[84,56,63,5,"View"],[84,60,63,9],[84,61,63,9,"default"],[84,68,63,9],[85,6,63,10,"style"],[85,11,63,15],[85,13,63,17],[86,8,63,19,"flex"],[86,12,63,23],[86,14,63,25],[86,15,63,26],[87,8,63,28,"alignItems"],[87,18,63,38],[87,20,63,40],[87,28,63,48],[88,8,63,50,"justifyContent"],[88,22,63,64],[88,24,63,66],[89,6,63,75],[89,7,63,77],[90,6,63,77,"children"],[90,14,63,77],[90,30,64,6],[90,34,64,6,"_reactJsxDevRuntime"],[90,53,64,6],[90,54,64,6,"jsxDEV"],[90,60,64,6],[90,62,64,7,"ActivityIndicator"],[90,79,64,24],[90,80,64,24,"default"],[90,87,64,24],[91,8,64,25,"size"],[91,12,64,29],[91,14,64,30],[92,6,64,37],[93,8,64,37,"fileName"],[93,16,64,37],[93,18,64,37,"_jsxFileName"],[93,30,64,37],[94,8,64,37,"lineNumber"],[94,18,64,37],[95,8,64,37,"columnNumber"],[95,20,64,37],[96,6,64,37],[96,13,64,39],[96,14,64,40],[96,29,65,6],[96,33,65,6,"_reactJsxDevRuntime"],[96,52,65,6],[96,53,65,6,"jsxDEV"],[96,59,65,6],[96,61,65,7,"Text"],[96,65,65,11],[96,66,65,11,"default"],[96,73,65,11],[97,8,65,12,"style"],[97,13,65,17],[97,15,65,19],[98,10,65,21,"marginTop"],[98,19,65,30],[98,21,65,32],[99,8,65,35],[99,9,65,37],[100,8,65,37,"children"],[100,16,65,37],[100,18,65,38],[101,6,65,57],[102,8,65,57,"fileName"],[102,16,65,57],[102,18,65,57,"_jsxFileName"],[102,30,65,57],[103,8,65,57,"lineNumber"],[103,18,65,57],[104,8,65,57,"columnNumber"],[104,20,65,57],[105,6,65,57],[105,13,65,63],[105,14,65,64],[106,4,65,64],[107,6,65,64,"fileName"],[107,14,65,64],[107,16,65,64,"_jsxFileName"],[107,28,65,64],[108,6,65,64,"lineNumber"],[108,16,65,64],[109,6,65,64,"columnNumber"],[109,18,65,64],[110,4,65,64],[110,11,66,10],[110,12,66,11],[111,2,68,0],[112,2,68,1,"_s"],[112,4,68,1],[112,5,6,24,"OAuthCallback"],[112,18,6,37],[113,4,6,37],[113,12,7,17,"useRouter"],[113,23,7,26],[113,24,7,26,"useRouter"],[113,33,7,26],[113,35,8,17,"useLocalSearchParams"],[113,46,8,37],[113,47,8,37,"useLocalSearchParams"],[113,67,8,37],[114,2,8,37],[115,2,8,37,"_c"],[115,4,8,37],[115,7,6,24,"OAuthCallback"],[115,20,6,37],[116,2,6,37],[116,6,6,37,"_c"],[116,8,6,37],[117,2,6,37,"$RefreshReg$"],[117,14,6,37],[117,15,6,37,"_c"],[117,17,6,37],[118,0,6,37],[118,3]],"functionMap":{"names":["<global>","OAuthCallback","useEffect$argument_0","run"],"mappings":"AAA;eCK;YCI;gBCC;KD+C;GDE;CDQ"},"hasCjsExports":false},"type":"js/module"}]}